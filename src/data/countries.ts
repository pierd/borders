export interface Country {
  name: string;
  borders: string[];
}

export type Continent = 'Europe' | 'Asia' | 'Africa' | 'North America' | 'South America';

// Map each country to its continent
const countryContinent: Record<string, Continent> = {
  // Europe
  "France": "Europe",
  "Belgium": "Europe",
  "Luxembourg": "Europe",
  "Germany": "Europe",
  "Switzerland": "Europe",
  "Italy": "Europe",
  "Monaco": "Europe",
  "Spain": "Europe",
  "Andorra": "Europe",
  "Denmark": "Europe",
  "Poland": "Europe",
  "Czech Republic": "Europe",
  "Austria": "Europe",
  "Netherlands": "Europe",
  "Portugal": "Europe",
  "Slovenia": "Europe",
  "San Marino": "Europe",
  "Vatican City": "Europe",
  "Slovakia": "Europe",
  "Ukraine": "Europe",
  "Belarus": "Europe",
  "Lithuania": "Europe",
  "Hungary": "Europe",
  "Romania": "Europe",
  "Serbia": "Europe",
  "Croatia": "Europe",
  "Liechtenstein": "Europe",
  "Montenegro": "Europe",
  "Bosnia and Herzegovina": "Europe",
  "Bulgaria": "Europe",
  "North Macedonia": "Europe",
  "Kosovo": "Europe",
  "Greece": "Europe",
  "Albania": "Europe",
  "Norway": "Europe",
  "Sweden": "Europe",
  "Finland": "Europe",
  "Ireland": "Europe",
  "United Kingdom": "Europe",
  "Estonia": "Europe",
  "Latvia": "Europe",
  "Moldova": "Europe",
  "Russia": "Europe", // Listed as Europe since most borders are European

  // Asia
  "Turkey": "Asia",
  "Georgia": "Asia",
  "Armenia": "Asia",
  "Azerbaijan": "Asia",
  "Kazakhstan": "Asia",
  "Uzbekistan": "Asia",
  "Turkmenistan": "Asia",
  "Kyrgyzstan": "Asia",
  "Tajikistan": "Asia",
  "Afghanistan": "Asia",
  "Pakistan": "Asia",
  "India": "Asia",
  "Nepal": "Asia",
  "Bhutan": "Asia",
  "Bangladesh": "Asia",
  "Myanmar": "Asia",
  "Thailand": "Asia",
  "Laos": "Asia",
  "Vietnam": "Asia",
  "Cambodia": "Asia",
  "Malaysia": "Asia",
  "Brunei": "Asia",
  "Indonesia": "Asia",
  "Papua New Guinea": "Asia",
  "East Timor": "Asia",
  "China": "Asia",
  "Mongolia": "Asia",
  "North Korea": "Asia",
  "South Korea": "Asia",
  "Iran": "Asia",
  "Iraq": "Asia",
  "Kuwait": "Asia",
  "Saudi Arabia": "Asia",
  "Jordan": "Asia",
  "Syria": "Asia",
  "Israel": "Asia",
  "Lebanon": "Asia",
  "Palestine": "Asia",
  "Qatar": "Asia",
  "United Arab Emirates": "Asia",
  "Oman": "Asia",
  "Yemen": "Asia",
  "Singapore": "Asia",

  // Africa
  "Morocco": "Africa",
  "Egypt": "Africa",
  "Libya": "Africa",
  "Tunisia": "Africa",
  "Algeria": "Africa",
  "Western Sahara": "Africa",
  "Mauritania": "Africa",
  "Mali": "Africa",
  "Niger": "Africa",
  "Chad": "Africa",
  "Sudan": "Africa",
  "South Sudan": "Africa",
  "Eritrea": "Africa",
  "Ethiopia": "Africa",
  "Djibouti": "Africa",
  "Somalia": "Africa",
  "Kenya": "Africa",
  "Uganda": "Africa",
  "Tanzania": "Africa",
  "Rwanda": "Africa",
  "Burundi": "Africa",
  "Democratic Republic of the Congo": "Africa",
  "Republic of the Congo": "Africa",
  "Central African Republic": "Africa",
  "Cameroon": "Africa",
  "Nigeria": "Africa",
  "Benin": "Africa",
  "Togo": "Africa",
  "Ghana": "Africa",
  "Ivory Coast": "Africa",
  "Liberia": "Africa",
  "Sierra Leone": "Africa",
  "Guinea": "Africa",
  "Guinea-Bissau": "Africa",
  "Senegal": "Africa",
  "Gambia": "Africa",
  "Burkina Faso": "Africa",
  "Gabon": "Africa",
  "Equatorial Guinea": "Africa",
  "Angola": "Africa",
  "Zambia": "Africa",
  "Malawi": "Africa",
  "Mozambique": "Africa",
  "Zimbabwe": "Africa",
  "Botswana": "Africa",
  "Namibia": "Africa",
  "South Africa": "Africa",
  "Eswatini": "Africa",
  "Lesotho": "Africa",

  // North America
  "Canada": "North America",
  "United States": "North America",
  "Mexico": "North America",
  "Guatemala": "North America",
  "Belize": "North America",
  "Honduras": "North America",
  "El Salvador": "North America",
  "Nicaragua": "North America",
  "Costa Rica": "North America",
  "Panama": "North America",

  // South America
  "Colombia": "South America",
  "Venezuela": "South America",
  "Brazil": "South America",
  "Peru": "South America",
  "Ecuador": "South America",
  "Guyana": "South America",
  "Suriname": "South America",
  "French Guiana": "South America",
  "Bolivia": "South America",
  "Paraguay": "South America",
  "Argentina": "South America",
  "Chile": "South America",
  "Uruguay": "South America",
};

// Define all border pairs (each pair listed once)
const borderPairs: [string, string][] = [
  // Europe
  ["France", "Belgium"],
  ["France", "Luxembourg"],
  ["France", "Germany"],
  ["France", "Switzerland"],
  ["France", "Italy"],
  ["France", "Monaco"],
  ["France", "Spain"],
  ["France", "Andorra"],
  ["Germany", "Denmark"],
  ["Germany", "Poland"],
  ["Germany", "Czech Republic"],
  ["Germany", "Austria"],
  ["Germany", "Switzerland"],
  ["Germany", "Luxembourg"],
  ["Germany", "Belgium"],
  ["Germany", "Netherlands"],
  ["Spain", "Portugal"],
  ["Spain", "Andorra"],
  ["Spain", "Morocco"],
  ["Italy", "Switzerland"],
  ["Italy", "Austria"],
  ["Italy", "Slovenia"],
  ["Italy", "San Marino"],
  ["Italy", "Vatican City"],
  ["Poland", "Czech Republic"],
  ["Poland", "Slovakia"],
  ["Poland", "Ukraine"],
  ["Poland", "Belarus"],
  ["Poland", "Lithuania"],
  ["Poland", "Russia"],
  ["Austria", "Czech Republic"],
  ["Austria", "Slovakia"],
  ["Austria", "Hungary"],
  ["Austria", "Slovenia"],
  ["Austria", "Switzerland"],
  ["Austria", "Liechtenstein"],
  ["Belgium", "Luxembourg"],
  ["Belgium", "Netherlands"],
  ["Switzerland", "Liechtenstein"],
  ["Czech Republic", "Slovakia"],
  ["Hungary", "Slovakia"],
  ["Hungary", "Ukraine"],
  ["Hungary", "Romania"],
  ["Hungary", "Serbia"],
  ["Hungary", "Croatia"],
  ["Hungary", "Slovenia"],
  ["Slovakia", "Ukraine"],
  ["Slovenia", "Croatia"],
  ["Croatia", "Serbia"],
  ["Croatia", "Bosnia and Herzegovina"],
  ["Croatia", "Montenegro"],
  ["Serbia", "Romania"],
  ["Serbia", "Bulgaria"],
  ["Serbia", "North Macedonia"],
  ["Serbia", "Kosovo"],
  ["Serbia", "Montenegro"],
  ["Serbia", "Bosnia and Herzegovina"],
  ["Romania", "Bulgaria"],
  ["Romania", "Ukraine"],
  ["Romania", "Moldova"],
  ["Bulgaria", "North Macedonia"],
  ["Bulgaria", "Greece"],
  ["Bulgaria", "Turkey"],
  ["Greece", "Albania"],
  ["Greece", "North Macedonia"],
  ["Greece", "Turkey"],
  ["Albania", "Montenegro"],
  ["Albania", "Kosovo"],
  ["Albania", "North Macedonia"],
  ["Montenegro", "Bosnia and Herzegovina"],
  ["Montenegro", "Kosovo"],
  ["Kosovo", "North Macedonia"],
  ["Norway", "Sweden"],
  ["Norway", "Finland"],
  ["Norway", "Russia"],
  ["Sweden", "Finland"],
  ["Finland", "Russia"],
  ["Ireland", "United Kingdom"],
  ["Estonia", "Latvia"],
  ["Estonia", "Russia"],
  ["Latvia", "Lithuania"],
  ["Latvia", "Belarus"],
  ["Latvia", "Russia"],
  ["Lithuania", "Belarus"],
  ["Lithuania", "Russia"],
  ["Belarus", "Russia"],
  ["Belarus", "Ukraine"],
  ["Ukraine", "Russia"],
  ["Ukraine", "Moldova"],

  // Asia
  ["Turkey", "Georgia"],
  ["Turkey", "Armenia"],
  ["Turkey", "Iran"],
  ["Turkey", "Iraq"],
  ["Turkey", "Syria"],
  ["Turkey", "Azerbaijan"],
  ["Georgia", "Russia"],
  ["Georgia", "Azerbaijan"],
  ["Georgia", "Armenia"],
  ["Armenia", "Azerbaijan"],
  ["Armenia", "Iran"],
  ["Azerbaijan", "Russia"],
  ["Azerbaijan", "Iran"],
  ["Kazakhstan", "Russia"],
  ["Kazakhstan", "China"],
  ["Kazakhstan", "Kyrgyzstan"],
  ["Kazakhstan", "Uzbekistan"],
  ["Kazakhstan", "Turkmenistan"],
  ["Uzbekistan", "Kyrgyzstan"],
  ["Uzbekistan", "Tajikistan"],
  ["Uzbekistan", "Afghanistan"],
  ["Uzbekistan", "Turkmenistan"],
  ["Turkmenistan", "Afghanistan"],
  ["Turkmenistan", "Iran"],
  ["Kyrgyzstan", "Tajikistan"],
  ["Kyrgyzstan", "China"],
  ["Tajikistan", "China"],
  ["Tajikistan", "Afghanistan"],
  ["Afghanistan", "China"],
  ["Afghanistan", "Pakistan"],
  ["Afghanistan", "Iran"],
  ["Pakistan", "Iran"],
  ["Pakistan", "India"],
  ["Pakistan", "China"],
  ["India", "China"],
  ["India", "Nepal"],
  ["India", "Bhutan"],
  ["India", "Bangladesh"],
  ["India", "Myanmar"],
  ["Nepal", "China"],
  ["Bhutan", "China"],
  ["Bangladesh", "Myanmar"],
  ["Myanmar", "China"],
  ["Myanmar", "Laos"],
  ["Myanmar", "Thailand"],
  ["Thailand", "Laos"],
  ["Thailand", "Cambodia"],
  ["Thailand", "Malaysia"],
  ["Laos", "China"],
  ["Laos", "Vietnam"],
  ["Laos", "Cambodia"],
  ["Vietnam", "China"],
  ["Vietnam", "Cambodia"],
  ["Malaysia", "Brunei"],
  ["Malaysia", "Indonesia"],
  ["Malaysia", "Singapore"],
  ["Indonesia", "Papua New Guinea"],
  ["Indonesia", "East Timor"],
  ["China", "Russia"],
  ["China", "Mongolia"],
  ["China", "North Korea"],
  ["Mongolia", "Russia"],
  ["North Korea", "South Korea"],
  ["North Korea", "Russia"],
  ["Iran", "Iraq"],
  ["Iraq", "Kuwait"],
  ["Iraq", "Saudi Arabia"],
  ["Iraq", "Jordan"],
  ["Iraq", "Syria"],
  ["Syria", "Jordan"],
  ["Syria", "Israel"],
  ["Syria", "Lebanon"],
  ["Jordan", "Saudi Arabia"],
  ["Jordan", "Israel"],
  ["Jordan", "Palestine"],
  ["Israel", "Lebanon"],
  ["Israel", "Egypt"],
  ["Israel", "Palestine"],
  ["Palestine", "Egypt"],
  ["Saudi Arabia", "Kuwait"],
  ["Saudi Arabia", "Qatar"],
  ["Saudi Arabia", "United Arab Emirates"],
  ["Saudi Arabia", "Oman"],
  ["Saudi Arabia", "Yemen"],
  ["United Arab Emirates", "Oman"],
  ["Oman", "Yemen"],

  // Africa
  ["Egypt", "Libya"],
  ["Egypt", "Sudan"],
  ["Libya", "Tunisia"],
  ["Libya", "Algeria"],
  ["Libya", "Niger"],
  ["Libya", "Chad"],
  ["Libya", "Sudan"],
  ["Tunisia", "Algeria"],
  ["Algeria", "Morocco"],
  ["Algeria", "Niger"],
  ["Algeria", "Mali"],
  ["Algeria", "Mauritania"],
  ["Algeria", "Western Sahara"],
  ["Morocco", "Western Sahara"],
  ["Western Sahara", "Mauritania"],
  ["Mauritania", "Mali"],
  ["Mauritania", "Senegal"],
  ["Mali", "Niger"],
  ["Mali", "Burkina Faso"],
  ["Mali", "Ivory Coast"],
  ["Mali", "Guinea"],
  ["Mali", "Senegal"],
  ["Niger", "Chad"],
  ["Niger", "Nigeria"],
  ["Niger", "Benin"],
  ["Niger", "Burkina Faso"],
  ["Chad", "Sudan"],
  ["Chad", "Central African Republic"],
  ["Chad", "Cameroon"],
  ["Chad", "Nigeria"],
  ["Sudan", "Central African Republic"],
  ["Sudan", "South Sudan"],
  ["Sudan", "Ethiopia"],
  ["Sudan", "Eritrea"],
  ["South Sudan", "Ethiopia"],
  ["South Sudan", "Kenya"],
  ["South Sudan", "Uganda"],
  ["South Sudan", "Democratic Republic of the Congo"],
  ["South Sudan", "Central African Republic"],
  ["Eritrea", "Ethiopia"],
  ["Eritrea", "Djibouti"],
  ["Ethiopia", "Djibouti"],
  ["Ethiopia", "Somalia"],
  ["Ethiopia", "Kenya"],
  ["Djibouti", "Somalia"],
  ["Somalia", "Kenya"],
  ["Kenya", "Uganda"],
  ["Kenya", "Tanzania"],
  ["Uganda", "Tanzania"],
  ["Uganda", "Rwanda"],
  ["Uganda", "Democratic Republic of the Congo"],
  ["Tanzania", "Rwanda"],
  ["Tanzania", "Burundi"],
  ["Tanzania", "Democratic Republic of the Congo"],
  ["Tanzania", "Zambia"],
  ["Tanzania", "Malawi"],
  ["Tanzania", "Mozambique"],
  ["Rwanda", "Burundi"],
  ["Rwanda", "Democratic Republic of the Congo"],
  ["Burundi", "Democratic Republic of the Congo"],
  ["Democratic Republic of the Congo", "Central African Republic"],
  ["Democratic Republic of the Congo", "Republic of the Congo"],
  ["Democratic Republic of the Congo", "Angola"],
  ["Democratic Republic of the Congo", "Zambia"],
  ["Republic of the Congo", "Gabon"],
  ["Republic of the Congo", "Cameroon"],
  ["Republic of the Congo", "Central African Republic"],
  ["Republic of the Congo", "Angola"],
  ["Central African Republic", "Cameroon"],
  ["Cameroon", "Nigeria"],
  ["Cameroon", "Gabon"],
  ["Cameroon", "Equatorial Guinea"],
  ["Gabon", "Equatorial Guinea"],
  ["Nigeria", "Benin"],
  ["Benin", "Togo"],
  ["Benin", "Burkina Faso"],
  ["Togo", "Ghana"],
  ["Togo", "Burkina Faso"],
  ["Ghana", "Ivory Coast"],
  ["Ghana", "Burkina Faso"],
  ["Ivory Coast", "Liberia"],
  ["Ivory Coast", "Guinea"],
  ["Ivory Coast", "Burkina Faso"],
  ["Liberia", "Sierra Leone"],
  ["Liberia", "Guinea"],
  ["Sierra Leone", "Guinea"],
  ["Guinea", "Guinea-Bissau"],
  ["Guinea", "Senegal"],
  ["Guinea-Bissau", "Senegal"],
  ["Senegal", "Gambia"],
  ["Angola", "Zambia"],
  ["Angola", "Namibia"],
  ["Zambia", "Malawi"],
  ["Zambia", "Mozambique"],
  ["Zambia", "Zimbabwe"],
  ["Zambia", "Botswana"],
  ["Zambia", "Namibia"],
  ["Malawi", "Mozambique"],
  ["Mozambique", "Zimbabwe"],
  ["Mozambique", "South Africa"],
  ["Mozambique", "Eswatini"],
  ["Zimbabwe", "South Africa"],
  ["Zimbabwe", "Botswana"],
  ["Botswana", "Namibia"],
  ["Botswana", "South Africa"],
  ["Namibia", "South Africa"],
  ["South Africa", "Eswatini"],
  ["South Africa", "Lesotho"],

  // North America
  ["Canada", "United States"],
  ["United States", "Mexico"],
  ["Mexico", "Guatemala"],
  ["Mexico", "Belize"],
  ["Guatemala", "Belize"],
  ["Guatemala", "Honduras"],
  ["Guatemala", "El Salvador"],
  ["Honduras", "El Salvador"],
  ["Honduras", "Nicaragua"],
  ["Nicaragua", "Costa Rica"],
  ["Costa Rica", "Panama"],
  ["Panama", "Colombia"],

  // South America
  ["Colombia", "Venezuela"],
  ["Colombia", "Brazil"],
  ["Colombia", "Peru"],
  ["Colombia", "Ecuador"],
  ["Venezuela", "Brazil"],
  ["Venezuela", "Guyana"],
  ["Guyana", "Brazil"],
  ["Guyana", "Suriname"],
  ["Suriname", "Brazil"],
  ["Suriname", "French Guiana"],
  ["French Guiana", "Brazil"],
  ["Ecuador", "Peru"],
  ["Peru", "Brazil"],
  ["Peru", "Bolivia"],
  ["Peru", "Chile"],
  ["Bolivia", "Brazil"],
  ["Bolivia", "Paraguay"],
  ["Bolivia", "Argentina"],
  ["Bolivia", "Chile"],
  ["Chile", "Argentina"],
  ["Paraguay", "Brazil"],
  ["Paraguay", "Argentina"],
  ["Argentina", "Brazil"],
  ["Argentina", "Uruguay"],
  ["Uruguay", "Brazil"],
];

// Build the countries list from border pairs
function buildCountriesFromPairs(pairs: [string, string][]): Country[] {
  const bordersMap = new Map<string, Set<string>>();

  for (const [a, b] of pairs) {
    if (!bordersMap.has(a)) bordersMap.set(a, new Set());
    if (!bordersMap.has(b)) bordersMap.set(b, new Set());
    bordersMap.get(a)!.add(b);
    bordersMap.get(b)!.add(a);
  }

  return Array.from(bordersMap.entries())
    .map(([name, borders]) => ({
      name,
      borders: Array.from(borders).sort(),
    }))
    .sort((a, b) => a.name.localeCompare(b.name));
}

export const countries: Country[] = buildCountriesFromPairs(borderPairs);

// Get list of all country names for search/validation
export const countryNames: string[] = countries.map(c => c.name);

// Get country's continent
export function getCountryContinent(countryName: string): Continent | undefined {
  return countryContinent[countryName];
}

// Get countries filtered by continent (only those with at least 2 borders within the continent)
export function getCountriesByContinent(continent: Continent): Country[] {
  const continentCountryNames = new Set(
    Object.entries(countryContinent)
      .filter(([, c]) => c === continent)
      .map(([name]) => name)
  );

  return countries
    .filter(c => continentCountryNames.has(c.name))
    .map(c => ({
      name: c.name,
      // Only include borders that are also in the same continent
      borders: c.borders.filter(b => continentCountryNames.has(b)),
    }))
    .filter(c => c.borders.length >= 2); // Must have at least 2 borders within continent
}

// List of all continents
export const continents: Continent[] = ['Europe', 'Asia', 'Africa', 'North America', 'South America'];

// Countries that have only 1 neighbor (might be too easy)
export const easyCountries = countries.filter(c => c.borders.length === 1).map(c => c.name);

// Countries with many neighbors (harder)
export const hardCountries = countries.filter(c => c.borders.length >= 6).map(c => c.name);
